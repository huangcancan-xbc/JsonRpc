# async、packaged_task、promise 小结

| 名称                       | 封装的是什么            | 作用核心                  | 谁来执行任务              | 谁来取结果                 |
| ------------------------ | ----------------- | --------------------- | ------------------- | --------------------- |
| **`std::async`**         | 封装“**函数调用**”      | 自动创建线程执行函数，并返回 future | **系统自动** 创建线程        | 主线程（用 `future.get()`） |
| **`std::packaged_task`** | 封装“**任务（可调用对象）**” | 让你手动决定 **何时何地** 执行任务    | **你自己创建的线程** 执行      | 主线程（用 `future.get()`） |
| **`std::promise`**       | 封装“**结果（共享状态）**”  | 让一个线程设置值，另一个线程获取值     | 子线程调用 `set_value()` | 主线程（用 `future.get()`） |

| 类比      | async    | packaged_task | promise      |
| ------- | -------- | ------------- | ------------ |
| 像什么     | “自动外卖”   | “自制外卖”        | “快递盒子”       |
| 谁帮你送    | 系统帮你新建线程 | 你自己建线程送       | 你只负责装结果      |
| 你能控制线程吗 | 否（自动建）   | 能（手动建）        | 能（自己决定在哪设置值） |
| 你关心的重点  | 想偷懒自动并发  | 想自己调度任务       | 想在线程间传值      |